<!DOCTYPE html>
<html>
  <head>
    <title>Azure Stack Edge Redline Mod</title>
    <script>
        var URL = "http://localhost:1880";
        var content = null;
        var cover = null;
        var logo = null;
        var spinner = null;
        var path = null;
        var path2 = null;
        var offset1 = 0.0;
        var offset2 = 0.0;
        var t = 0;
        var interval = null;
        var ready = false;

        window.onload = function()
        {
            content = document.getElementById("content");
            cover = document.getElementById("cover");
            logo = document.getElementById("logo");
            spinner = document.getElementById("spinner");
            ring = document.getElementById("ring");
            path = document.getElementById("path");
            path2 = document.getElementById("path2");
            
            content.src = URL;

            logo.style.opacity = 0.0;
            ring.style.opacity = 0.0;
            setTimeout(() => { logo.style.transition = "2s"; logo.style.opacity = 1.0; }, 1000);
            setTimeout(() => { ring.style.transition = "0.5s"; ring.style.opacity = 1.0; }, 3000);
            setTimeout(() => { interval = setInterval(() => { setSpinner(); }, 10); }, 4000);
            setTimeout(() => { cover.style.transition = "2s"; cover.style.opacity = 0.0; }, 8000);
            setTimeout(() => { ready = true; }, 15000);
        }

        var setSpinner = function()
        {
            var a = (Math.sin(offset1 * 2 * Math.PI) * -100) + 150;
            var b = (Math.cos(offset1 * 2 * Math.PI) * 100) + 150;
            var c = (Math.sin(offset2 * 2 * Math.PI) * -100) + 150;
            var d = (Math.cos(offset2 * 2 * Math.PI) * 100) + 150;
            var l = (offset1 < 0.5) ? t : 1 - t;
            var r = 100;
            path.setAttribute("d", ""
                 + "M " + (a) + " " + (b) + " "
                 + "A " + (r) + " " + (r) + " " + (1 - t) + " " + (l) + " " + (1 - t) + " " + (c) + " " + (d)
            );
            path2.setAttribute("d", ""
                 + "M " + (a) + " " + (b) + " "
                 + "A " + (r) + " " + (r) + " " + (1 - t) + " " + (l) + " " + (1 - t) + " " + (c) + " " + (d)
            );
            offset1 += 0.005; if (offset1 >= 1.0) { offset1 = 0.0; }
            offset2 += 0.010; if (offset2 >= 1.0) { offset2 = 0.0; }
            if ((offset1 == 0.0) && (offset2 == 0.0)) { t = 1 - t; }
            if (ready == true) { clearInterval(interval); }
        }
    </script>
  </head>
  <body>
    <iframe id="content" style="position: fixed; top: 0px; left:0px; width: 100%; height: 100%; border: none;"></iframe>
    <div id="cover" style="position: fixed; top: 0px; left: 0px; width: 100%; height: 100%; background: rgba(0, 0, 0, 1.00);">
      <img id="logo" style="position: fixed; top: calc(50% - 50px - 8px); left: calc(50% - 50px); width: 100px; height: 100px; filter: contrast(77%) saturate(111%) blur(1px); image-rendering: crisp-edges;" src="./azure_stack_edge_redline.png" alt="redline"></img>
      <svg id="spinner" style="position: fixed; top: calc(50% - 150px); left: calc(50% - 150px); width: 300px; height: 300px;">
        <filter id="glow"><fegaussianblur class="blur" stddeviation="5"></fegaussianblur></filter>
        <circle id="ring" style="cx: 150px; cy: 150px; r: 100px; fill: rgba(0, 0, 0, 0.0); stroke-width: 2px; stroke: rgba(255, 0, 64, 0.8); filter: url(#glow); opacity: 0.0;"></circle>
        <path id="path" style="fill: rgba(0, 0, 0, 0.0); stroke-width: 7px; stroke: rgba(255, 0, 100, 0.8); filter: url(#glow);"></path>
        <path id="path2" style="fill: rgba(0, 0, 0, 0.0); stroke-width: 2px; stroke: rgba(255, 180, 255, 0.8);"></path>
      </svg>
    </div>
  </body>
</html>